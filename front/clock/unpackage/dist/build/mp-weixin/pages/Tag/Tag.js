"use strict";const a=require("../../common/vendor.js"),t=require("../../common/assets.js"),e=require("../../store/tag.js"),i=require("../../store/user.js"),o=require("../../store/time.js");if(!Array){(a.resolveComponent("navbar")+a.resolveComponent("uni-transition")+a.resolveComponent("uni-popup-dialog")+a.resolveComponent("uni-popup"))()}Math||((()=>"../../components/navbar/navbar.js")+(()=>"../../uni_modules/uni-transition/components/uni-transition/uni-transition.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const n={__name:"Tag",setup(n){const s=a.inject("url"),u=i.useUserStore(),g=e.useTagStore();o.useTimeStore();const d=a.reactive({tagWithTime:[],ifshowButton:!0,ifshowTagDetailBNull:!1});a.onMounted((()=>{g.data.tagPoint=1,g.data.ifTagUpdate=0,a.index.request({url:s+"/tag/get",method:"POST",data:u.data.userEmail,success:a=>{if(console.log(a),1==a.data.data[0].ifTagNull)d.ifshowTagDetailBNull=!0,g.data.tagHour=0,g.data.tagMinute=30;else{g.data.tagName="",g.data.tagDescribe="",d.ifshowTagDetailBNull=!1,g.data.tagHour=a.data.data[0].tagHour,g.data.tagMinute=a.data.data[0].tagMinute;for(let t=0;t<a.data.data.length;t++)d.tagWithTime.push({tagName:a.data.data[t].tagName,tagDescribe:a.data.data[t].tagDescribe,tagHour:a.data.data[t].tagHour,tagMinute:a.data.data[t].tagMinute,tagPoint:a.data.data[t].tagPoint,tagId:a.data.data[t].id})}}})}));let r=a.ref(null);const l=()=>{r.value.close(),a.index.request({url:s+"/tag/delete",method:"POST",data:d.tagWithTime[d.index].tagName,success:t=>{a.index.showToast({icon:"none",title:"删除标签"}),d.tagWithTime.length--,0==d.tagWithTime.length&&(d.ifshowTagDetailBNull=!0),d.tagWithTime.splice(d.index,1)}})},p=()=>{r.value.close()};return(e,i)=>a.e({a:a.p({navbarTo:"/menu/3"}),b:!d.ifshowTagDetailBNull},d.ifshowTagDetailBNull?{}:{c:a.f(d.tagWithTime,((t,e,i)=>({a:a.t(t.tagName),b:a.t(t.tagDescribe),c:a.o((t=>(t=>{g.data.tagName=d.tagWithTime[t].tagName,g.data.tagDescribe=d.tagWithTime[t].tagDescribe,g.data.tagHour=d.tagWithTime[t].tagHour,g.data.tagMinute=d.tagWithTime[t].tagMinute,g.data.tagPoint=d.tagWithTime[t].tagPoint,g.data.ifTagUpdate=1,g.data.tagId=d.tagWithTime[t].tagId,a.index.redirectTo({url:"../../pages/TagCreat/TagCreat"})})(e)),e),d:"a1d91c32-1-"+i,e:a.o((a=>(a=>{r.value.open(),d.index=a})(e)),e),f:"a1d91c32-2-"+i,g:e}))),d:t._imports_0$5,e:t._imports_1$3,f:a.p({"mode-class":"fade",show:a.unref(g).data.ifshowTagDetailB}),g:t._imports_2$4,h:a.p({"mode-class":"fade",show:a.unref(g).data.ifshowTagDetailBDelete})},{i:d.ifshowTagDetailBNull},d.ifshowTagDetailBNull?{j:t._imports_0$5}:{},{k:t._imports_3$1,l:a.o(p),m:a.o(l),n:a.p({type:"error",mode:"base",title:"确定要删除吗?",content:"删除后将会从您的标签移除数据",duration:2e3,"before-close":!0}),o:a.sr(r,"a1d91c32-3",{k:"popup"}),p:a.p({type:"dialog"})})}};wx.createPage(n);

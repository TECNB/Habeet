"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),s=require("../../store/tag.js"),r=require("../../store/user.js"),t=require("../../store/time.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const o={__name:"Login",setup(o){const d=e.inject("url"),i=r.useUserStore(),u=s.useTagStore(),n=t.useTimeStore(),l=e.reactive({password:"password",eye:"eye"}),c=()=>{e.index.redirectTo({url:"../../pages/Home/Home"})},p=()=>{e.index.redirectTo({url:"../../pages/Sign/Sign"}),i.data.userPassword="",i.data.ifUpdate=1},m=()=>{"text"==l.password?l.password="password":"password"==l.password&&(l.password="text"),"eye"==l.eye?l.eye="eye-slash":"eye-slash"==l.eye&&(l.eye="eye")},g=()=>{e.index.request({url:d+"/user/login",method:"POST",data:{userEmail:i.data.userEmail,userPassword:i.data.userPassword},success:a=>{console.log(a),i.data.userPassword="",null!=a.data.code?(i.data.point=a.data.data.point,i.data.completeTarget=a.data.data.completeTarget,i.data.userName=a.data.data.userName,i.data.picUrl=a.data.data.picUrl,e.index.redirectTo({url:"../../pages/index/Time"})):e.index.showToast({icon:"none",title:"密码错误"})}})};return n.data.remainingTime=3600*u.data.tagHour+60*u.data.tagMinute+u.data.tagSecond,e.onMounted((()=>{})),console.log(i.data.userEmail),(s,r)=>({a:a._imports_0$2,b:e.t(e.unref(i).data.userEmail),c:e.o(c),d:l.password,e:e.unref(i).data.userPassword,f:e.o((a=>e.unref(i).data.userPassword=a.detail.value)),g:e.o(m),h:e.p({type:l.eye,size:"25"}),i:e.o(p),j:e.o(g)})}};wx.createPage(o);

"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),a=require("../../store/target.js"),i=require("../../store/user.js");if(!Array){(e.resolveComponent("uni-datetime-picker")+e.resolveComponent("uni-section"))()}Math||((()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js"))();const r={__name:"target-creat-menu",setup(r){const o=e.inject("url"),s=i.useUserStore(),n=a.useTargetStore(),l=[" ","1 Point","2 Points","3 Points","4 Points","5 Points","6 Points","7 Points","8 Points","9 Points","10 Points"],d=e.reactive({single:"",showPicker:!1,index:0,ifshowtargetCreatDay:!0,inputClearValue1:"",inputClearValue2:"",showClearIcon1:!1,showClearIcon2:!1,ifshowtargetCreatDay1:!0,ifshowtargetCreatDay2:!0,ifTargetUpdate:0});d.inputClearValue1=n.data.targetName,d.inputClearValue2=n.data.targetDescribe,d.single=n.data.deadline,d.index=n.data.targetPoint,d.ifTargetUpdate=n.data.ifTargetUpdate,d.targetId=n.data.targetId,""!=d.single&&(d.ifshowtargetCreatDay1=!0),0!=d.index&&(d.ifshowtargetCreatDay2=!0);const u=()=>{d.ifshowtargetCreatDay1=!0},g=()=>{d.ifshowtargetCreatDay2=!0},c=e=>{d.index=e.detail.value},C=e=>{d.inputClearValue1=e.target.value,e.target.value.length>0?d.showClearIcon1=!0:d.showClearIcon1=!1},h=e=>{d.inputClearValue2=e.target.value,e.target.value.length>0?d.showClearIcon2=!0:d.showClearIcon2=!1},p=()=>{d.inputClearValue1="",d.showClearIcon1=!1},w=()=>{d.inputClearValue2="",d.showClearIcon2=!1},f=()=>{d.ifshowtargetCreatDay=!d.ifshowtargetCreatDay,d.ifshowtargetCreatDay1=!d.ifshowtargetCreatDay1,d.ifshowtargetCreatDay2=!d.ifshowtargetCreatDay2,d.single="",d.index=0},m=()=>{""==d.inputClearValue1?e.index.showToast({icon:"none",title:"请输入目标名"}):""==d.inputClearValue2?e.index.showToast({icon:"none",title:"请输入目标备注"}):0==d.index?e.index.showToast({icon:"none",title:"请添加分数"}):e.index.request({url:o+"/target/save",method:"POST",data:{deadlineString:d.single,userEmail:s.data.userEmail,targetName:d.inputClearValue1,targetDescribe:d.inputClearValue2,targetPoint:d.index,ifTargetUpdate:d.ifTargetUpdate,targetId:d.targetId},success:t=>{if(4==t.data.data.status)e.index.showToast({icon:"none",title:"重复输入"});else if(0==t.data.data.status)n.data.ifshowTargetTaskNull0=!1;else if(1==t.data.data.status){console.log(t);let a=new Date(t.data.data.deadlineString);n.data.deadlineDate.includes(a)||n.data.deadlineDate.push(a),n.data.ifshowTargetTaskNull1=!1,e.index.redirectTo({url:"../../pages/Target/Target"})}}})};return(a,i)=>e.e({a:t._imports_0$11,b:e.o(m),c:t._imports_1$6,d:d.inputClearValue1,e:e.o(C),f:d.showClearIcon1},d.showClearIcon1?{g:t._imports_2$3,h:e.o(p)}:{},{i:d.inputClearValue2,j:e.o(h),k:d.showClearIcon2},d.showClearIcon2?{l:t._imports_2$3,m:e.o(w)}:{},{n:e.o(f),o:d.ifshowtargetCreatDay},d.ifshowtargetCreatDay?{p:t._imports_3$3,q:e.o(u),r:e.o((e=>d.single=e)),s:e.p({type:"datetime","hide-second":"true",modelValue:d.single})}:{},{t:d.ifshowtargetCreatDay},d.ifshowtargetCreatDay?{v:t._imports_4,w:e.o(g),x:e.o(g),y:e.o((e=>d.showPicker=!0)),z:e.o(c),A:d.index,B:l}:{},{C:d.ifshowtargetCreatDay1,D:e.p({title:"截止时间："+d.single,type:"line"}),E:d.ifshowtargetCreatDay2,F:e.p({title:"可得分数："+l[d.index],type:"line"})})}},o=e._export_sfc(r,[["__scopeId","data-v-8bff2fe7"]]);wx.createComponent(o);
